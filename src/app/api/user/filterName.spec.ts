import { describe, it, expect } from 'vitest'

import { filterName } from './filterName'

describe('filterName', () => {
  it('Trim leading and trailing space', () => {
    expect(filterName(' pongsaphol     ')).toEqual('pongsaphol')

    expect(filterName(' s i a o r e o     ')).toEqual('s i a o r e o')
  })

  it('International language works fine', () => {
    const thai = '‡∏û‡∏•‡πÄ‡∏≠‡∏Å ‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏ó‡∏ò‡πå ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡πÇ‡∏≠‡∏ä‡∏≤'
    expect(filterName(thai)).toEqual(thai)

    const chinese = '‰π†ËøëÂπ≥' // generated by chatgpt
    expect(filterName(chinese)).toEqual(chinese)

    const jp = '„É©„Éì„ÉÉ„Éà„Éè„Ç¶„Çπ'
    expect(filterName(jp)).toEqual(jp)
  })

  it('Normalize space', () => {
    expect(filterName('‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ      ‡∏ó‡πà‡∏≤‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å')).toEqual('‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ‡∏ó‡πà‡∏≤‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å')

    expect(filterName('Hello\nWorld')).toEqual('Hello World')

    expect(filterName('„Çà„ÅÜ„Åì„Åù„ÄÄ„Åä„ÅÑ„Åß„ÄÄ„É©„Éì„ÉÉ„Éà„Éè„Ç¶„Çπ')).toEqual(
      '„Çà„ÅÜ„Åì„Åù „Åä„ÅÑ„Åß „É©„Éì„ÉÉ„Éà„Éè„Ç¶„Çπ'
    )

    expect(filterName('„ÄÄ„ÄÄ„ÅÑ„Å°„ÄÄ„ÄÄ„Å´„ÄÄ„ÄÄ„Åï„Çì„ÄÄ„ÄÄ')).toEqual('„ÅÑ„Å° „Å´ „Åï„Çì')
  })

  it('Emoji', () => {
    const e1 = '‚ùì‚ùì‚ùì'
    expect(filterName(e1)).toEqual(e1)

    const e2 = 'üëçüèø'
    expect(filterName(e2)).toEqual(e2)

    const e3 = 'üëçüèø üëçüèø üëçüèø üëçüèøüëçüèø'
    expect(filterName(e3)).toEqual(e3)
  })

  it('Invisible characters', () => {
    const zeroWidth = '‡∏™‡∏±‡∏ô‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‡πÇ‡∏ï‡∏∞'
    const normalStr = '‡∏™‡∏±‡∏ô‡πÇ‡∏ï‡∏∞'

    expect(zeroWidth).not.toEqual(normalStr)
    expect(filterName(zeroWidth)).toEqual(normalStr)

    const testStr = '„Ö§„Ö§ „Ö§„Ö§'
    const expectedStr = ''
    expect(testStr).not.toEqual(expectedStr)
    expect(filterName(testStr)).toEqual(expectedStr)

    const ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏Å‡∏µ‡∏¢‡∏ô = '‚†Ä‚†Ä‚†Ä'
    const ‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏Å‡∏µ‡∏¢‡∏ô = ''
    expect(‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏Å‡∏µ‡∏¢‡∏ô).not.toEqual(‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏Å‡∏µ‡∏¢‡∏ô)
    expect(filterName(‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏Å‡∏µ‡∏¢‡∏ô)).toEqual(‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏Å‡∏µ‡∏¢‡∏ô)
  })

  it('Mixed case', () => {
    expect(filterName('„ÄÄ„ÄÄ„ÄÄ')).toEqual('')
    expect(filterName('   ')).toEqual('')

    expect(filterName('Icy ‡πÄ‡∏Å‡∏µ‡∏¢‡∏ô  ‚ùì')).toEqual('Icy ‡πÄ‡∏Å‡∏µ‡∏¢‡∏ô ‚ùì')

    const testStr = '„Ö§kingpin 2147483647'
    const expectedStr = 'kingpin 2147483647'
    expect(testStr).not.toEqual(expectedStr)
    expect(filterName(testStr)).toEqual(expectedStr)

    const testStr2 = '‚†Ägean‚†Ä‚†Ä ‚†Ä‚†Ä'
    const expectedStr2 = 'gean'
    expect(testStr2).not.toEqual(expectedStr2)
    expect(filterName(testStr2)).toEqual(expectedStr2)
  })
})
